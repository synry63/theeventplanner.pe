{% extends 'wedding/layout.html.twig' %}
{% block title %}Blog {% endblock %}
{% block metaFacebook %}
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="{{ noticia.nombre }}" />
    <meta property="og:description"   content="{{ noticia.parafos[0].description |nl2br }}" />

    <meta property="og:image"         content="{{ app.request.getUriForPath(vich_uploader_asset(noticia, 'imgFile' ))}}" />


    <meta property="fb:app_id"        content="286482508388833">
    <meta property="og:url"           content={{ app.request.uri }}>
{% endblock %}


{% block main_title %}
    <div id="tittle_responsive" class="container">
        <div class="row">
            <div class="tittle_base">
                <img src="{{ asset('images/tittle_blog.png') }}" alt="Blog Tittle">
            </div>
        </div>
    </div>
{% endblock %}

{% block menuprincipal %}
    {% set menuItem = knp_menu_get('AppBundle:Builder:mainMenuWedding', [], {'image_title': 'tittle_blog.png'}) %}
    {{ knp_menu_render(menuItem) }}
{% endblock menuprincipal %}

{% block content %}
    {{ parent() }}
    <div class="container breadcrumbs-{{ app.request.get('slug_site') }}">
        {{ wo_render_breadcrumbs() }}
    </div>
    <div class="container news-blog">
        <div class="col-md-8 new-principal">
            <a href="#"><img width="100%" src="{{ vich_uploader_asset(noticia, 'imgFile') }}" alt=""></a>
            <h1 class="title-{{ app.request.get('slug_site') }}">{{ noticia.nombre }}</h1>
            <span>{{ noticia.adedAt|date("d F, Y") }} </span>
            <a href="#coments" style="color: rgba(0,0,0,.7);"><span style="padding: 0 5px"><i class="fa fa-comments" aria-hidden="true"></i> Comentarios ({{ comentarios|length }})</span></a>

            <span style="padding: 0 5px"><div class="fb-share-button"
                       data-href="{{ app.request.uri }}"
                       data-layout="button">
                </div></span>
            <span style="padding: 0 5px"><div class="fb-like"
                       data-href="{{ app.request.uri }}"
                       data-layout="button_count"
                       data-action="like"
                       data-show-faces="false">
                </div></span>
            <br>
            <br>

            {% for p in noticia.parafos %}
                <p>{{ p.description }}</p>
                {% if p.img is not null %}
                    <img width="80%" style="margin-bottom: 20px" src="{{ vich_uploader_asset(p, 'imgFile') }}" alt=""/>
                {% endif %}

            {% endfor %}


            {% if comentarios is not null  %}
                <hr id="coments">
            {% endif %}

            <div class="comments-box2 comments-new">
                {% if comentarios is not null  %}
                    <h4 class="title-heading tittle-slicks2">Comentarios <span>({{ comentarios|length }})</span></h4>
                {% endif %}

                {% for co in noticia.comentarios %}
                    <div class="media comment">
                        <div class="media-left media-{{ app.request.get('slug_site') }}">
                            {% if co.user.profile is not null %}
                                <img class="img-circle" width="50px" alt="user icon" src="{{ vich_uploader_asset(co.user.profile, 'profileFile','AppBundle\\Entity\\FotoProfile') }}">
                            {% else %}
                                <img class="img-circle" width="50px" alt="user icon" src="{{ asset('images/user_icon.png') }}">
                            {% endif %}
                        </div>
                        <div class="media-body media-body-{{ app.request.get('slug_site') }}">
                            <div>
                                <h3>{{ co.user.nombres }} {{ co.user.apellidos }}</h3>
                                <small>{{ co.adedAt|date("d F, Y") }}</small>
                            </div>
                            <p>{{ co.comentario }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>

        </div>

        <div class="col-md-4 news-relacionadas">
            {{ render(controller('AppBundle:Blog:relatedNoticias',{'type': noticia.type,'id':noticia.id,'slug_site':app.request.get('slug_site') })) }}
        </div>




    </div>




{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('js/fixto.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/jquery.smoothscroll.min.js') }}"></script>
    <script>
        $('.news-relacionadas').fixTo('body');

        $(function() {
            $('html').smoothScroll(500);
        });
    </script>
{% endblock %}
