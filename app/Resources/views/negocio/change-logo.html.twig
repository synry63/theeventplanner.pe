
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300italic,100italic,700,700italic,400italic,300,100' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="{{ asset('css/bootstrap-theme.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ asset('css/jquery.rateyo.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/croppic.css') }}">
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
    <title>Cambiar Logo</title>
    <style>
        .cropImgWrapper{
            background: rgba(255,155,155,0.5);
            border-radius: 50%;
        }

    </style>
</head>

<body class="todo_negocio">
<nav class="navbar navbar-default nav-zonaneg">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="#"><img class="logo_prov" src="{{ vich_uploader_asset(app.user.logo, 'logoFile','AppBundle\\Entity\\Logo')| imagine_filter('logo_thumb') }}" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            {{ knp_menu_render('AppBundle:Builder:menuNegocio',{ 'template': 'knp_menu.html.twig'}) }}
            <ul class="nav navbar-nav navbar-right">
                {% if is_granted('ROLE_USER') %}
                    <li><a href="{{ path('negocio_logout') }}">Salir</a></li>
                {% endif %}
            </ul>
        </div><!-- /.navbar-collapse -->

    </div><!-- /.container-fluid -->
</nav>

{% for label, flash in app.session.flashbag.get('success') %}
    <div class="alert alert-success">
        {{ flash }}
    </div>
{% endfor %}

<div class="container dashboard negocio_reg">
    <div id="select-img" class="col-md-8 col-md-offset-2" >
        <div class="panel panel-default">
            <div id="cropContainerMinimal" style="width: 250px;height: 250px;"></div>
            <div class="panel-heading">
                <i class="fa fa-picture-o" aria-hidden="true"></i> Cambiar Logo
            </div>
            <div class="panel-body">
                <img width="30%" style="margin-bottom: 10px" src="{{ vich_uploader_asset(logo, 'logoFile','AppBundle\\Entity\\Logo') }}" />
                <br>
                {% for label, flashes in app.session.flashbag.all %}
                    {% for flash in flashes %}
                        <div class="alert alert-{{ label }}">
                            {{ flash }}
                        </div>
                    {% endfor %}
                {% endfor %}
                {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

                {{ form_widget(form.logoFile,{ 'attr': {'class': 'btn btn-entrar'},'label': 'Seleccionar Foto'}) }}
                {{ form_errors(form.logoFile) }}

                <div>{{ form_widget(form.submit,{ 'attr': {'class': 'btn btn-entrar'},'label': 'Subir Foto'}) }}</div>

                {{ form_end(form) }}
                <p>Recomendamos una imagen cuadrado (ej : 300x300)
                    <br>
                    Recomendamos una imagen formato JPG o PNG
                    <br>
                    La imagen no puede pesar mas de 300KB
                    <br>
                    Ancho minimo del logo 250px
                    <br>
                    Altura minima del logo 250px</p>
            </div>
        </div>

    </div>
</div>


<script type="text/javascript" src="{{ asset('js/jquery-1.11.0.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('js/bootstrap.js') }}"></script>
<script type="text/javascript" src="{{ asset('js/bootstrap-filestyle.min.js') }}"></script>


<script type="text/javascript" src="{{ asset('js/croppic.min.js') }}"></script>
<script>
    $("#bs-example-navbar-collapse-1 ul").addClass("nav navbar-nav");
    $("#select-img input").filestyle('buttonText', 'Seleccionar Foto');
    $("#select-img input").filestyle('icon', false);

    $("#select-img input").addClass("filestyle");

    var dev = "/app_dev.php";
    var cropperOptions = {
        uploadUrl:dev+'/negocio/zona/image-processing',
        cropUrl:dev+'/negocio/zona/image-crop',
        //uploadUrl:'/profile/image-processing',
        //cropUrl:'/profile/image-crop',
        modal:false,
        doubleZoomControls:false,
        rotateControls: false,
        loaderHtml:'<div class="loader bubblingG"><span id="bubblingG_1"></span><span id="bubblingG_2"></span><span id="bubblingG_3"></span></div> ',
        onBeforeImgUpload: function(){  },
        onAfterImgUpload: function(){  },
        onImgDrag: function(){  },
        onImgZoom: function(){  },
        onBeforeImgCrop: function(){  },
        onAfterImgCrop:function(data){
            noty({
                text: data.message,
                'layout':'bottom',
                type:'theevent',
                timeout:2000});
            setTimeout(function(){
                window.location.href = data.targetUrl;
            }, 3000);
            var n = noty({
                theme: 'default_noty',
            });
        },
        onReset:function(){  },
        onError:function(errormessage){ }
    }
    var cropperHeader = new Croppic('cropContainerMinimal', cropperOptions);
</script>
</body>


</html>






